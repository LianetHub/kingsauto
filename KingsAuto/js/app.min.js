(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1}),$((function(){const e={Android:()=>/Android/i.test(navigator.userAgent),BlackBerry:()=>/BlackBerry/i.test(navigator.userAgent),iOS:()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),Opera:()=>/Opera Mini/i.test(navigator.userAgent),Windows:()=>/IEMobile/i.test(navigator.userAgent),any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}};function t(){e.any()||$(window).width()<992?$("body").removeClass("_pc").addClass("_touch"):$("body").removeClass("_touch").addClass("_pc")}function s(){var e=$(".header__wrapper").outerHeight()/parseFloat($("html").css("font-size"));$("body").css("--header-height",e+"rem")}t(),$(window).on("resize",(()=>{t()})),function(e){let t=new Image;t.onload=t.onerror=function(){var e;e=2==t.height,$("body").addClass(e?"webp":"no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),$(document).on("click",(e=>{const t=$(e.target);if(t.closest(".menu__btn").length&&($("body").toggleClass("lock"),$(".header").toggleClass("open-menu")),t.hasClass("menu__arrow")){const e=t.next(".submenu");$(".menu__arrow.active").get(0)!==t.get(0)&&($(".submenu.open").removeClass("open"),$(".menu__arrow.active").removeClass("active")),e.toggleClass("open"),t.toggleClass("active")}t.is(".brands__all")&&(t.closest(".brands__list").find(".brands__item.brands__item-more").toggleClass("visible"),t.toggleClass("active"),t.hasClass("active")?t.text("Скрыть"):t.text("Все марки")),t.is(".reviews__card-btn")&&(t.prev().toggleClass("full"),t.toggleClass("active"),t.hasClass("active")?t.text("Скрыть"):t.text("Читать полностью")),t.is(".favorite-btn")&&t.toggleClass("active"),t.is(".catalog__filter-btn")&&($(".filter").addClass("visible"),$("body").addClass("filter-lock")),(t.is(".filter.visible")||t.is(".filter__close")||t.is(".filter__reset"))&&($(".filter").removeClass("visible"),$("body").removeClass("filter-lock"))})),$(".promo__slider").length&&new Swiper(".promo__slider",{slidesPerView:1,speed:800,effect:"fade",loop:!0,autoplay:{delay:8e3,stopOnLastSlide:!1},fadeEffect:{crossFade:!0},pagination:{el:".promo__pagination",clickable:!0},on:{beforeInit:e=>{let t=e.params.speed,s=e.params.autoplay.delay;$(".promo__pagination").css("--counting-speed",(t+s)/1e3+"s")}}}),$(".selections__slider").each(((e,t)=>{const s=$(t).find(".swiper"),i=$(t).find(".selections__prev"),a=$(t).find(".selections__next"),o=$(t).find(".selections__pagination");new Swiper(s[0],{speed:800,slidesPerView:"auto",spaceBetween:20,navigation:{nextEl:a[0],prevEl:i[0]},pagination:{el:o[0],clickable:!0},breakpoints:{767.98:{slidesPerView:3}}})})),$(".auto-card__slider").each(((e,t)=>{const s=$(t).find(".auto-card__slider-pagination");new Swiper(t,{speed:800,slidesPerView:1,pagination:{el:s[0],clickable:!0}})})),$(".catalog__filter-categories").length&&new Swiper(".catalog__filter-categories",{slidesPerView:"auto",speed:800,spaceBetween:5}),new IntersectionObserver((e=>{e[0].isIntersecting?$(".header").removeClass("scroll"):$(".header").addClass("scroll")})).observe($(".header")[0]),s(),$(window).on("resize",(function(){s()})),$(".catalog__layout-input").on("change",(function(e){"rows"===$(e.target).val()?$(".catalog__grid").addClass("rows"):$(".catalog__grid").removeClass("rows")}));class i{constructor(e){this.$wrapper=$(e),this.$tabButtons=this.$wrapper.find(".tabs__item"),this.$tabContents=this.$wrapper.find(".tab-content"),this.init()}init(){this.$tabButtons.each(((e,t)=>{$(t).on("click",(()=>this.activateTab(e)))}))}activateTab(e){this.$tabButtons.removeClass("active"),this.$tabContents.removeClass("active"),this.$tabButtons.eq(e).addClass("active"),this.$tabContents.eq(e).addClass("active")}}$(".tabs-wrapper").each(((e,t)=>new i(t))),$("form").on("submit",(function(e){let t=!0;$(this).find('[aria-required="true"]').each((function(){$(this).is(":checkbox")?$(this).is(":checked")||($(this).addClass("error"),t=!1):""===$(this).val().trim()&&($(this).addClass("error"),t=!1)})),t||e.preventDefault()})),$('[aria-required="true"]').on("change input",(function(){$(this).is(":checkbox")?$(this).is(":checked")&&$(this).removeClass("error"):""!==$(this).val().trim()&&$(this).removeClass("error")}));const a=(e,t)=>{const s=e.find(".dropdown__button"),i=e.find(".dropdown__list");if(s.attr("aria-expanded",t),i.attr("aria-hidden",!t),t){e.removeClass("dropdown-top");const t=i[0].getBoundingClientRect(),a=window.innerHeight;t.bottom>a&&e.addClass("dropdown-top"),e.addClass("visible"),s.addClass("active"),i[0].scrollHeight>i[0].clientHeight?i.addClass("has-scroll"):i.removeClass("has-scroll")}else e.removeClass("visible"),s.removeClass("active")},o=e=>{const t=e.find(".dropdown__button"),s=e.find(".dropdown__list").find(".dropdown__list-item"),i=e.find(".dropdown__input");e.attr("role","listbox"),s.attr("role","option"),t.on("click",(()=>{const s="true"===t.attr("aria-expanded");a(e,!s)})),s.on("click",(function(){s.removeClass("active").removeAttr("aria-checked"),$(this).addClass("active").attr("aria-checked","true");const o=t.find(".dropdown__button-text");o.length?o.text($(this).text()):t.text($(this).text()),i.val($(this).data("value")),a(e,!1),i.trigger("change")}))};$(".dropdown").each((function(){(e=>{const t=e.find(".dropdown__button"),s=e.find(".dropdown__list"),i=e.find(".dropdown__input"),a={selectedText:t.html(),selectedValue:i.val(),isOpen:"true"===t.attr("aria-expanded"),hasScroll:s[0].scrollHeight>s[0].clientHeight};e.data("initialState",a)})($(this)),o($(this))})),$(document).on("click",(e=>{$(".dropdown.visible").each((function(){const t=$(this);t.is(e.target)||0!==t.has(e.target).length||a(t,!1)}))})),$(document).on("keydown",(e=>{"Escape"===e.key&&$(".dropdown.visible").each((function(){a($(this),!1)}))})),$(document).on("reset","form",(e=>{$(e.target).closest("form").find(".dropdown").each((function(){(e=>{const t=e.data("initialState");if(!t)return;const s=e.find(".dropdown__button"),i=e.find(".dropdown__list"),a=e.find(".dropdown__list-item"),o=e.find(".dropdown__input");s.html(t.selectedText),o.val(t.selectedValue),s.attr("aria-expanded",t.isOpen?"true":"false"),i.attr("aria-hidden",t.isOpen?"false":"true"),t.hasScroll?i.addClass("has-scroll"):i.removeClass("has-scroll"),t.isOpen?e.addClass("visible"):e.removeClass("visible");const n=a.first();a.removeClass("active").removeAttr("aria-checked"),n.addClass("active").attr("aria-checked","true")})($(this))}))}))}))})();