(()=>{"use strict";"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1}),$((function(){const t={Android:()=>/Android/i.test(navigator.userAgent),BlackBerry:()=>/BlackBerry/i.test(navigator.userAgent),iOS:()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),Opera:()=>/Opera Mini/i.test(navigator.userAgent),Windows:()=>/IEMobile/i.test(navigator.userAgent),any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}};function e(){t.any()||$(window).width()<992?$("body").removeClass("_pc").addClass("_touch"):$("body").removeClass("_touch").addClass("_pc")}if(e(),$(window).on("resize",(()=>{e()})),$(document).on("click",(t=>{const e=$(t.target);if(e.closest(".menu__btn").length&&($("body").toggleClass("lock"),$(".header").toggleClass("open-menu")),e.hasClass("menu__arrow")){const t=e.next(".submenu");$(".menu__arrow.active").get(0)!==e.get(0)&&($(".submenu.open").removeClass("open"),$(".menu__arrow.active").removeClass("active")),t.toggleClass("open"),e.toggleClass("active")}if(e.is(".brands__all")&&(e.closest(".brands__list").find(".brands__item.brands__item-more").toggleClass("visible"),e.toggleClass("active"),e.hasClass("active")?e.text("Скрыть"):e.text("Все марки")),e.is(".reviews__card-btn")&&(e.prev().toggleClass("full"),e.toggleClass("active"),e.hasClass("active")?e.text("Скрыть"):e.text("Читать полностью")),e.is(".favorite-btn")&&e.toggleClass("active"),e.is(".catalog__filter-btn")&&($(".filter").addClass("visible"),$("body").addClass("filter-lock")),(e.is(".filter.visible")||e.is(".filter__close")||e.is(".filter__reset"))&&($(".filter").removeClass("visible"),$("body").removeClass("filter-lock")),e.is(".type-btn-toggler")){const t=e.prev(".switcher__input"),s=e.next(".switcher__input");t.is(":checked")?s.prop("checked",!0):t.prop("checked",!0)}e[0].closest(".info__item-title")&&e.closest(".info__item-title").toggleClass("active").next().slideToggle(),e[0].closest(".login-btn")&&$("body").hasClass("_touch")&&(t.preventDefault(),e.closest(".login-btn").next().toggleClass("visible")),e.is(".lk__caption-back")&&($(".lk__sidebar").addClass("open"),$(".lk__body").removeClass("active"))})),$(".promo__slider").length&&new Swiper(".promo__slider",{slidesPerView:1,speed:800,effect:"fade",loop:!0,autoplay:{delay:8e3,stopOnLastSlide:!1},fadeEffect:{crossFade:!0},pagination:{el:".promo__pagination",clickable:!0},on:{beforeInit:t=>{let e=t.params.speed,s=t.params.autoplay.delay;$(".promo__pagination").css("--counting-speed",(e+s)/1e3+"s")}}}),$(".selections__slider").each(((t,e)=>{const s=$(e).find(".swiper"),i=$(e).find(".selections__prev"),n=$(e).find(".selections__next"),o=$(e).find(".selections__pagination");new Swiper(s[0],{speed:800,slidesPerView:"auto",spaceBetween:20,navigation:{nextEl:n[0],prevEl:i[0]},pagination:{el:o[0],clickable:!0},breakpoints:{767.98:{slidesPerView:3}}})})),$(".auto-card__slider").each(((t,e)=>{const s=$(e).find(".auto-card__slider-pagination");new Swiper(e,{speed:800,slidesPerView:1,pagination:{el:s[0],clickable:!0}})})),$(".catalog__filter-categories").length&&new Swiper(".catalog__filter-categories",{slidesPerView:"auto",speed:800,spaceBetween:5}),$(".article__slider").length&&new Swiper(".article__slider",{slidesPerView:1,speed:800,navigation:{nextEl:".article__next",prevEl:".article__prev"}}),$(".product__slider-content").length){const o=new Swiper(".product__slider-content",{slidesPerView:1,loop:!0,navigation:{nextEl:".product__slider-next",prevEl:".product__slider-prev"}}),a=$(".product__thumb");a.length&&(a.on("click",(function(){const t=$(this).index();o.slideToLoop(t),a.removeClass("active"),$(this).addClass("active")})),o.on("slideChange",(function(){const t=o.realIndex;a.removeClass("active"),a.eq(t).addClass("active")})))}function s(){var t=$(".header__wrapper").outerHeight()/parseFloat($("html").css("font-size"));$("body").css("--header-height",t+"rem")}new IntersectionObserver((t=>{t[0].isIntersecting?$(".header").removeClass("scroll"):$(".header").addClass("scroll")})).observe($(".header")[0]),s(),$(window).on("resize",(function(){s()})),$(".catalog__layout-input").on("change",(function(t){"rows"===$(t.target).val()?$(".catalog__grid").addClass("rows"):$(".catalog__grid").removeClass("rows")}));class i{constructor(t){this.$wrapper=$(t),this.$tabButtons=this.$wrapper.find(".tabs__item"),this.$tabContents=this.$wrapper.find(".tab-content"),this.init()}init(){this.$tabButtons.each(((t,e)=>{$(e).on("click",(()=>this.activateTab(t)))}))}activateTab(t){this.$tabButtons.removeClass("active"),this.$tabContents.removeClass("active"),this.$tabButtons.eq(t).addClass("active"),this.$tabContents.eq(t).addClass("active")}}$(".tabs-wrapper").each(((t,e)=>new i(e))),$("form").on("submit",(function(t){let e=!0;$(this).find('[aria-required="true"]').each((function(){$(this).is(":checkbox")?$(this).is(":checked")||($(this).addClass("error"),e=!1):""===$(this).val().trim()&&($(this).addClass("error"),e=!1)})),e||t.preventDefault()})),$('[aria-required="true"]').on("change input",(function(){$(this).is(":checkbox")?$(this).is(":checked")&&$(this).removeClass("error"):""!==$(this).val().trim()&&$(this).removeClass("error")}));class n{constructor(t){this.$select=$(t),this.defaultText=this.$select.find("option:selected").text(),this.selectName=this.$select.attr("name"),this.$options=this.$select.find("option"),this.icon=this.$select.data("icon"),this.title=this.$select.data("title"),this.$dropdown=null,this.initialState={},this.init()}init(){this.$select.length&&(this.saveInitialState(),this.$select.addClass("hidden"),this.renderDropdown(),this.setupEvents())}saveInitialState(){const t=this.$select.find("option:selected");this.initialState={selectedText:t.text(),selectedValue:t.val()}}renderDropdown(){const t=this.$select.is(":disabled");let e="";e=this.icon?`\n                    <button type="button" class="dropdown__button icon-chevron" \n                        aria-expanded="false" \n                        aria-haspopup="true" \n                        ${t?"disabled":""}>\n                        <span class="dropdown__button-icon ${this.icon}"></span>\n                        <span class="dropdown__button-text">${this.defaultText}</span>\n                    </button>\n                `:this.title?`\n                    <button type="button" class="dropdown__button icon-chevron" \n                        aria-expanded="false" \n                        aria-haspopup="true" \n                        ${t?"disabled":""}>\n                        <span class="dropdown__button-column">\n                            <span class="dropdown__button-caption">${this.title}</span>\n                            <span class="dropdown__button-text">${this.defaultText}</span>\n                        </span>\n                    </button>\n                `:`\n                    <button type="button" class="dropdown__button icon-chevron" \n                        aria-expanded="false" \n                        aria-haspopup="true" \n                        ${t?"disabled":""}>\n                        <span class="dropdown__button-text">${this.defaultText}</span>\n                    </button>\n                `,this.$dropdown=$(`\n                <div class="dropdown">\n                    ${e}\n                    <div class="dropdown__body" aria-hidden="true">\n                        <ul class="dropdown__list" role="listbox"></ul>\n                    </div>\n                </div>\n            `);const s=this.$dropdown.find(".dropdown__list");this.$options.each(((t,e)=>{const i=$(e),n=i.attr("value"),o=i.text(),a=i.is(":selected"),r=i.is(":disabled");s.append(`\n                    <li role="option"\n                        data-value="${n}"\n                        aria-checked="${a}"\n                        class="dropdown__list-item${a?" selected":""}${r?" disabled":""}" \n                        ${r?'aria-disabled="true"':""}>\n                        ${o}\n                    </li>\n                `)})),this.$select.after(this.$dropdown)}setupEvents(){this.$dropdown.find(".dropdown__button").on("click",(t=>{t.stopPropagation();const e=this.$dropdown.hasClass("visible");this.toggleDropdown(!e)})),this.$dropdown.find(".dropdown__list-item").on("click",(t=>{t.stopPropagation();const e=$(t.currentTarget);e.hasClass("disabled")||this.selectOption(e)})),$(document).on("click",(()=>this.closeDropdown())),$(document).on("keydown",(t=>{"Escape"===t.key&&this.closeDropdown()})),this.$select.closest("form").on("reset",(()=>this.restoreInitialState())),new MutationObserver((()=>{const t=this.$select.is(":disabled"),e=this.$dropdown.find(".dropdown__button");t?e.prop("disabled",!0):e.prop("disabled",!1)})).observe(this.$select[0],{attributes:!0,attributeFilter:["disabled"]})}toggleDropdown(t){const e=this.$dropdown.find(".dropdown__body"),s=this.$dropdown.find(".dropdown__list"),i=s[0].scrollHeight>s[0].clientHeight;if(this.$dropdown.toggleClass("visible",t),this.$dropdown.find(".dropdown__button").attr("aria-expanded",t),e.attr("aria-hidden",!t),t){this.$dropdown.removeClass("dropdown-top");const t=e[0].getBoundingClientRect(),n=window.innerHeight;t.bottom>n&&this.$dropdown.addClass("dropdown-top"),s.toggleClass("has-scroll",i)}}closeDropdown(){this.toggleDropdown(!1)}selectOption(t){const e=t.data("value"),s=t.text();this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false"),t.addClass("selected").attr("aria-checked","true"),this.$dropdown.find(".dropdown__button-text").text(s),this.$select.val(e).trigger("change"),this.closeDropdown()}restoreInitialState(){const t=this.initialState;this.$select.val(t.selectedValue).trigger("change"),this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false"),this.$dropdown.find(`.dropdown__list-item[data-value="${t.selectedValue}"]`).addClass("selected").attr("aria-checked","true"),this.$dropdown.find(".dropdown__button-text").text(t.selectedText)}}if($(".select").each(((t,e)=>{new n(e)})),$(".phone-input").length>0&&$(".phone-input").each((function(t,e){let s=intlTelInput(e,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"ru",separateDialCode:!0}),i=n();function n(){let t;return t="ru"==s.j?"({{999}}) {{999}}-{{99}}-{{99}}":"{{9999999999999999999999}}",t}e.addEventListener("countrychange",(function(){i=n(),$(e).formatter().resetPattern(i)})),$(e).formatter({pattern:i})})),$(".code").length>0){const r=$(".code__input"),l={backspace:8,arrowLeft:37,arrowRight:39};function d(t){const e=$(t.target),s=e.next(".code__input");s.length&&e.val()&&(s.focus(),s.val()&&s.select())}function c(t){t.preventDefault();const e=t.originalEvent.clipboardData.getData("text");r.each(((t,s)=>{$(s).val(e[t]||"")}))}function p(t){const e=$(t.target);if(e.val())return void e.val("");const s=e.prev(".code__input");s.length&&s.focus()}function h(t){const e=$(t.target).prev(".code__input");e.length&&e.focus()}function u(t){const e=$(t.target).next(".code__input");e.length&&e.focus()}$(".code").on("input",".code__input",d),r.first().on("paste",c),r.on("focus",(function(){const t=$(this);setTimeout((()=>{t.select()}),0)})),r.on("keydown",(function(t){switch(t.keyCode){case l.backspace:p(t);break;case l.arrowLeft:h(t);break;case l.arrowRight:u(t)}}))}}))})();